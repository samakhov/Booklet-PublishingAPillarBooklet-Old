<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Publishing Documents with Pillar 7.0</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Highlight js -->
    <link rel="stylesheet" href="_support/html/highlightjs/styles/default.css">
    <link rel="stylesheet" href="_support/html/css/highlight-commands.css">
    <script src="_support/html/highlightjs/highlight.pack.js"></script>
    <script src="_support/html/js/highlight-commands.js"></script>

    <!-- Bootstrap -->
    <link href="_support/html/css/bootstrap.min.css" rel="stylesheet">
    <link href="_support/html/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="_support/html/css/square-braket-associates.css" rel="stylesheet">
    <style>
/*        .container { max-width: 55em; } */
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container text-justify">
      <section>
        <h1>Publishing Documents with Pillar 7.0</h1>
        <div class="attribution">St√©phane Ducasse and Guillermo Polito and Asbath Sama</div>

        
<h2>5 Minutes Tutorial (To be revisited)</h2>

<p>
In this section we give the basic steps to get you started with your first Pillar document and exports. You first need to create a <em>base directory</em> inside
which we will put all your text, configuration files, and Pillar itself.
</p>
<figure><pre><code class="bash">mkdir mydocument
cd mydocument</code></pre><figcaption></figcaption></figure>

<h2>1Installing and Exporting your First Document</h2>

<p>
The use of pillar is possible on all platform supported by Pharo. In fact Pillar is executed on top of Pharo 
</p>
<p>
so you can use Pillar on Linux, MacOSX, Windows.
</p>

<h3>Pillar installation on Windows</h3>

<p>
Windows is not able to deals with .sh and makefile script natively, so we have to install Pillar manually or install <a href="https://www.cygwin.com/">https://www.cygwin.com/</a> which provides functionality similar to a Linux distribution.
</p>
<p>
If you decide to install cygwin you should be able to follow the Mac OS X / Linux installation section otherwise you can follow the next steps.
</p>

<p>
If you don't have Pharo you can get it here : <a href="http://files.pharo.org/platform/Pharo5.0-win.zip">http://files.pharo.org/platform/Pharo5.0-win.zip</a>
</p>
<p>
Then download and extract the content of Pillar-deployment.zip in the Pharo directory.
</p>
<p>
<a href="https://ci.inria.fr/pharo-contribution/job/Pillar/PHARO=50,VERSION=stable,VM=vm/lastSuccessfulBuild/artifact/Pillar-deployment.zip">https://ci.inria.fr/pharo-contribution/job/Pillar/PHARO=50,VERSION=stable,VM=vm/lastSuccessfulBuild/artifact/Pillar-deployment.zip</a>
</p>

<ul>
<li>Let's create an html document example :</li>
</ul>

<p>
Create for instance welcome.pillar file. You can place it in your Pharo directory and fill in this code example
</p><figure><pre><code>{
	&quot;metadata&quot;: {
			&quot;title&quot;:&quot;My first document while reading the 5 minutes Pillar tutorial&quot;
	},
	&quot;outputDirectory&quot; : &quot;book-result&quot;
}
!Hello World</code></pre><figcaption></figcaption></figure>

<p>
We would like pillar to generate a json file which will be used by a generation template.
Maj + right click in the Pharo directory and open a terminal and paste this command to generate the json file.
</p>
<figure><pre><code>Pharo.exe Pillar.image pillar export --to=html --outputFile=welcome welcome.pillar</code></pre><figcaption></figcaption></figure>

<p>
This command starts Pharo with Pillar image and trigger the pillar handler. Then it specifies the exportation as html and the output file as welcome. The .html.json will be appended automatically to the end of the filename so welcome.pillar.json will be created and placed in book-result folder (you can specify the outputDirectory in the command or in the .pillar file and this is the same for other attributes like outputFile).
The last argument is the path of the input file.
</p>
<p>
Then we have to create a template, for instance let's create welcome.html.template in the Pharo directory and fill in this template example :
</p><figure><pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
	&lt;head&gt;
		&lt;title&gt;{{{title}}}&lt;/title&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;div class=&quot;container&quot;&gt;
			{{{content}}}
		&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><figcaption></figcaption></figure>

<p>
This latest command let us make the html document thanks by the json and template files.
Each attribute in the template will be replaced by its value in the json file.
</p>
<figure><pre><code>Pharo.exe Pillar.image mustache --data=book-result/welcome.html.json --template=welcome.html.template</code></pre><figcaption></figcaption></figure>

<p>
You can check the result in the stdout file which is placed in the Pharo directory
</p>
<ul>
<li>Exportation in latex</li>
</ul>
<p>
The procedure is the same with other kind of document. This is an another example with latex
</p>
<p>
In this example we show how to add a bibliography and how to export the result as pdf with pdflatex provided by (MiKTeX distribution)
</p>
<p>
Let's set some attributes (title, content) in testLatex.pillar for instance
</p>
<figure><pre><code>{
    &quot;metadata&quot;: {
      &quot;title&quot;:&quot;My latex bibliography test with Pillar !&quot;
    }
}

my bibliography test
{{{latex: \bibliographystyle{abbrv}
\bibliography{rmod}
}}}</code></pre><figcaption></figcaption></figure>

<p>
We create testLatex.tex.json with the following command
</p>
<figure><pre><code>Pharo.exe Pillar.image pillar export --to=latex --outputFile=testLatex testLatex.pillar</code></pre><figcaption></figcaption></figure>

<p>
Then, let's create the template in testLatex.latex.template file for instance
</p>
<figure><pre><code>\documentclass{article}

\begin{document}

Cite : first \cite{ref}, second \cite{ref2}, third \cite{ref3}.

{{{content}}}

\end{document}</code></pre><figcaption></figcaption></figure>

<p>
We generate the document in the stdout file with the following command
</p>
<figure><pre><code>Pharo.exe Pillar.image mustache --data=testLatex.tex.json --template=testLatex.latex.template</code></pre><figcaption></figcaption></figure>

<p>
Create a bibliography if it doesn't exists and place it in the Pharo directory. In our example this is rmod.bib file
</p>
<p>
Then, link the bibliography with the latex document
</p><figure><pre><code>bibtex stdout</code></pre><figcaption></figcaption></figure>

<p>
Create your pdf
</p><figure><pre><code>pdflatex stdout</code></pre><figcaption></figcaption></figure>


<h2>5 Minutes Tutorial (to be merged with getting started)</h2>

<p>
In this section we give the basic steps to get you started with your first Pillar document and exports. You first need to create a <em>base directory</em> inside
which we will put all your text, configuration files, and Pillar itself.
</p>
<figure><pre><code class="bash">mkdir mydocument
cd mydocument</code></pre><figcaption></figcaption></figure>

<h3>Installing and Exporting your First Document</h3>

<p>
The use of pillar is possible on all platform supported by Pharo. In fact Pillar is executed on top of Pharo 
</p>
<p>
so you can use Pillar on Linux, MacOSX, Windows.
</p>

<h4>Pillar installation on Windows</h4>

<p>
Windows is not able to deals with .sh and makefile script natively, so we have to install Pillar manually or install <a href="https://www.cygwin.com/">https://www.cygwin.com/</a> which provides functionality similar to a Linux distribution.
</p>
<p>
If you decide to install cygwin you should be able to follow the Mac OS X / Linux installation section otherwise you can follow the next steps.
</p>

<p>
If you don't have Pharo you can get it here : <a href="http://files.pharo.org/platform/Pharo5.0-win.zip">http://files.pharo.org/platform/Pharo5.0-win.zip</a>
</p>
<p>
Then download and extract the content of Pillar-deployment.zip in the Pharo directory.
</p>
<p>
<a href="https://ci.inria.fr/pharo-contribution/job/Pillar/PHARO=50,VERSION=stable,VM=vm/lastSuccessfulBuild/artifact/Pillar-deployment.zip">https://ci.inria.fr/pharo-contribution/job/Pillar/PHARO=50,VERSION=stable,VM=vm/lastSuccessfulBuild/artifact/Pillar-deployment.zip</a>
</p>

<ul>
<li>Let's create an html document example :</li>
</ul>

<p>
Create for instance welcome.pillar file. You can place it in your Pharo directory and fill in this code example
</p><figure><pre><code>{
	&quot;metadata&quot;: {
			&quot;title&quot;:&quot;My first document while reading the 5 minutes Pillar tutorial&quot;
	},
	&quot;outputDirectory&quot; : &quot;book-result&quot;
}
!Hello World</code></pre><figcaption></figcaption></figure>

<p>
We would like pillar to generate a json file which will be used by a generation template.
Maj + right click in the Pharo directory and open a terminal and paste this command to generate the json file.
</p>
<figure><pre><code>Pharo.exe Pillar.image pillar export --to=html --outputFile=welcome welcome.pillar</code></pre><figcaption></figcaption></figure>

<p>
This command starts Pharo with Pillar image and trigger the pillar handler. Then it specifies the exportation as html and the output file as welcome. The .html.json will be appended automatically to the end of the filename so welcome.pillar.json will be created and placed in book-result folder (you can specify the outputDirectory in the command or in the .pillar file and this is the same for other attributes like outputFile).
The last argument is the path of the input file.
</p>
<h3>Pillar installation on Mac OS X / Linux</h3>

<p>
You first need to get Pillar. For that, we recommend
downloading and executing the script available at <a href="https://raw.githubusercontent.com/pillar-markup/pillar/master/download.sh">https://raw.githubusercontent.com/pillar-markup/pillar/master/download.sh</a> in 
the base directory if you are on an Unix environment.
</p>

<figure><pre><code class="bash">wget https://raw.githubusercontent.com/pillar-markup/pillar/master/download.sh
chmod +x download.sh
./download.sh</code></pre><figcaption></figcaption></figure>


<figure><pre><code class="bash">wget https://raw.githubusercontent.com/pillar-markup/pillar/master/download.sh
bash download.sh</code></pre><figcaption></figcaption></figure>

<figure><pre><code class="bash">curl https://raw.githubusercontent.com/pillar-markup/pillar/master/download.sh | bash</code></pre><figcaption></figcaption></figure>



<p>
Then, you can load an archetype (see Section <a href="#archetypes"></a>) with command:
</p>
<figure><pre><code class="bash">./pillar archetype welcome</code></pre><figcaption></figcaption></figure>

<p>
Now you can just compile the welcome file
</p>
<figure><pre><code>make build/welcome.html</code></pre><figcaption></figcaption></figure>

<p>
You can see the result of the compilation as follow: 
</p><figure><pre><code>&gt; more welcome.html

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;title&gt;My first document while reading the 5 minutes Pillar tutorial&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;
    &lt;section&gt;
&lt;h1&gt;1. Hello World&lt;/h1&gt;
&lt;/section&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre><figcaption></figcaption></figure>



      </section>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="_support/html/js/bootstrap.min.js"></script>

    <!-- Syntax highlighting of code blocks -->
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Prettify annotated paragraphs-->
    <script src="_support/html/js/annotated-paragraphs.js"></script>

  </body>
</html>
